{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { changeUser } from \"../store\";\nimport { useLazyFetchUserQuery } from \"../store\";\nimport TryLoadUserQuestions from '../Hooks/TryLoadUserQuestions';\nfunction TryUserLogin() {\n  _s();\n  const dispatch = useDispatch();\n  const [loginInput, setLoginInput] = useState('');\n  const [loginError, setLoginError] = useState(false);\n  const [fetchUser, results] = useLazyFetchUserQuery();\n  const user = useSelector(state => state.userData);\n\n  // Dispatch loaded user data\n  useEffect(() => {\n    if (user.id != 0) return; // this means user is already logged\n    if (loginInput == '') return;\n    console.log(loginInput);\n\n    // if(loginError || results.isUninitialized)\n    // {\n    //     console.log(\"do fecth user\");\n    //     fetchUser(loginInput);\n    //     setLoginError(false);\n    // }\n\n    if (!results.isSuccess || results.isUninitialized || results.isFetching) return;\n    console.log(results);\n    if (results.data.length <= 0) {\n      setLoginError(true);\n      return;\n    }\n    dispatch(changeUser(results.data[0]));\n    console.log(`login validated, user dispatched`);\n    console.log(results.data[0]);\n  }, [user, loginInput, results]);\n  return loginInput => {\n    fetchUser(loginInput);\n    setLoginError(false);\n    setLoginInput(loginInput);\n  };\n}\n_s(TryUserLogin, \"KWHzpI0VtBoTTbNZa5J4b+/oVzc=\", false, function () {\n  return [useDispatch, useLazyFetchUserQuery, useSelector];\n});\n_c = TryUserLogin;\nexport default TryUserLogin;\nvar _c;\n$RefreshReg$(_c, \"TryUserLogin\");","map":{"version":3,"names":["useDispatch","useSelector","useEffect","useState","changeUser","useLazyFetchUserQuery","TryLoadUserQuestions","TryUserLogin","dispatch","loginInput","setLoginInput","loginError","setLoginError","fetchUser","results","user","state","userData","id","console","log","isSuccess","isUninitialized","isFetching","data","length"],"sources":["/Users/machadogomes/Documents/InterviewHub/question_hub/src/Hooks/TryUserLogin.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { changeUser } from \"../store\";\nimport { \n    useLazyFetchUserQuery\n} from \"../store\";\nimport TryLoadUserQuestions from '../Hooks/TryLoadUserQuestions';\n\nfunction TryUserLogin()\n{\n    const dispatch = useDispatch();\n    const [loginInput, setLoginInput] = useState('');\n    const [loginError, setLoginError] = useState(false);\n    const [fetchUser, results] = useLazyFetchUserQuery();\n    const user = useSelector(state=>state.userData);\n    \n    // Dispatch loaded user data\n    useEffect(() => {\n        if(user.id != 0) return; // this means user is already logged\n        if(loginInput == '') return;\n\n        console.log(loginInput);\n\n        // if(loginError || results.isUninitialized)\n        // {\n        //     console.log(\"do fecth user\");\n        //     fetchUser(loginInput);\n        //     setLoginError(false);\n        // }\n\n        if(!results.isSuccess || results.isUninitialized || results.isFetching) return;\n        \n        console.log(results);\n        if(results.data.length <= 0){\n            setLoginError(true);\n            return;\n        }\n\n        dispatch(changeUser(results.data[0]));\n        console.log(`login validated, user dispatched`);\n        console.log(results.data[0]);\n\n    }, [user, loginInput, results])\n\n    return (loginInput) => {\n        fetchUser(loginInput);\n        setLoginError(false);\n        setLoginInput(loginInput);\n    };\n}\n\nexport default TryUserLogin;"],"mappings":";AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,UAAU,QAAQ,UAAU;AACrC,SACIC,qBAAqB,QAClB,UAAU;AACjB,OAAOC,oBAAoB,MAAM,+BAA+B;AAEhE,SAASC,YAAY,GACrB;EAAA;EACI,MAAMC,QAAQ,GAAGR,WAAW,EAAE;EAC9B,MAAM,CAACS,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACQ,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACU,SAAS,EAAEC,OAAO,CAAC,GAAGT,qBAAqB,EAAE;EACpD,MAAMU,IAAI,GAAGd,WAAW,CAACe,KAAK,IAAEA,KAAK,CAACC,QAAQ,CAAC;;EAE/C;EACAf,SAAS,CAAC,MAAM;IACZ,IAAGa,IAAI,CAACG,EAAE,IAAI,CAAC,EAAE,OAAO,CAAC;IACzB,IAAGT,UAAU,IAAI,EAAE,EAAE;IAErBU,OAAO,CAACC,GAAG,CAACX,UAAU,CAAC;;IAEvB;IACA;IACA;IACA;IACA;IACA;;IAEA,IAAG,CAACK,OAAO,CAACO,SAAS,IAAIP,OAAO,CAACQ,eAAe,IAAIR,OAAO,CAACS,UAAU,EAAE;IAExEJ,OAAO,CAACC,GAAG,CAACN,OAAO,CAAC;IACpB,IAAGA,OAAO,CAACU,IAAI,CAACC,MAAM,IAAI,CAAC,EAAC;MACxBb,aAAa,CAAC,IAAI,CAAC;MACnB;IACJ;IAEAJ,QAAQ,CAACJ,UAAU,CAACU,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACrCL,OAAO,CAACC,GAAG,CAAE,kCAAiC,CAAC;IAC/CD,OAAO,CAACC,GAAG,CAACN,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC;EAEhC,CAAC,EAAE,CAACT,IAAI,EAAEN,UAAU,EAAEK,OAAO,CAAC,CAAC;EAE/B,OAAQL,UAAU,IAAK;IACnBI,SAAS,CAACJ,UAAU,CAAC;IACrBG,aAAa,CAAC,KAAK,CAAC;IACpBF,aAAa,CAACD,UAAU,CAAC;EAC7B,CAAC;AACL;AAAC,GAzCQF,YAAY;EAAA,QAEAP,WAAW,EAGCK,qBAAqB,EACrCJ,WAAW;AAAA;AAAA,KANnBM,YAAY;AA2CrB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}