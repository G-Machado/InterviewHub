{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setUserField, useUploadUserMutation, usePostSubmissionMutation, setSubmissionDirty } from '../store';\nfunction useUploadUser() {\n  _s();\n  const [uploadUser, updateUserResults] = useUploadUserMutation();\n  const user = useSelector(state => state.userData);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (user.id == 0) return;\n    if (!user.isDirty) return;\n    uploadUser(user);\n    console.log(\"Uploaded user after mutation\");\n    dispatch(setUserField({\n      key: \"isDirty\",\n      value: false\n    }));\n  }, [user]);\n  const userQuestions = useSelector(state => state.questionsData);\n  const [submmitExam, submitResults] = usePostSubmissionMutation();\n  useEffect(() => {\n    if (user.id == 0) return;\n    if (!user.startedExam) return;\n    console.log(userQuestions);\n    if (!userQuestions.isDirty) return;\n    let answers = [];\n    userQuestions.data.map(question => {\n      answers.push({\n        id: question.id,\n        answerId: question.userAnswerId || 0\n      });\n    });\n    const submission = {\n      userId: user.id,\n      answers: answers\n    };\n    submmitExam(submission);\n    console.log(\"Uploaded submission after mutation\");\n    dispatch(setSubmissionDirty(false));\n  }, [userQuestions]);\n}\n_s(useUploadUser, \"ZQG+YXhCKkIY716mMPx6G0/tI1U=\", false, function () {\n  return [useUploadUserMutation, useSelector, useDispatch, useSelector, usePostSubmissionMutation];\n});\nexport default useUploadUser;","map":{"version":3,"names":["useEffect","useSelector","useDispatch","setUserField","useUploadUserMutation","usePostSubmissionMutation","setSubmissionDirty","useUploadUser","uploadUser","updateUserResults","user","state","userData","dispatch","id","isDirty","console","log","key","value","userQuestions","questionsData","submmitExam","submitResults","startedExam","answers","data","map","question","push","answerId","userAnswerId","submission","userId"],"sources":["/Users/machadogomes/Documents/InterviewHub/question_hub/src/Hooks/useUploadUser.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setUserField, useUploadUserMutation, usePostSubmissionMutation, setSubmissionDirty } from '../store';\n\nfunction useUploadUser()\n{\n    const [uploadUser, updateUserResults] = useUploadUserMutation();\n    const user = useSelector((state)=> state.userData);\n    const dispatch = useDispatch();\n\n    useEffect(()=>{\n        \n        if(user.id == 0) return;\n        if(!user.isDirty) return;\n\n        uploadUser(user);\n        console.log(\"Uploaded user after mutation\");\n        dispatch(setUserField({key: \"isDirty\", value:false}));\n\n    }, [user]);\n\n    const userQuestions = useSelector((state)=>state.questionsData);\n    const [submmitExam, submitResults] = usePostSubmissionMutation();\n\n    useEffect(()=>{\n        if(user.id == 0) return;\n        if(!user.startedExam) return;\n        console.log(userQuestions);\n        if(!userQuestions.isDirty)return;\n\n        let answers = [];\n        userQuestions.data.map((question) =>\n        {\n            answers.push({id: question.id, answerId: question.userAnswerId || 0});\n        })\n        const submission = {userId: user.id, answers: answers};\n        submmitExam(submission);\n        console.log(\"Uploaded submission after mutation\");\n        dispatch(setSubmissionDirty(false));\n    }, [userQuestions]);\n\n}\n\nexport default useUploadUser;"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,YAAY,EAAEC,qBAAqB,EAAEC,yBAAyB,EAAEC,kBAAkB,QAAQ,UAAU;AAE7G,SAASC,aAAa,GACtB;EAAA;EACI,MAAM,CAACC,UAAU,EAAEC,iBAAiB,CAAC,GAAGL,qBAAqB,EAAE;EAC/D,MAAMM,IAAI,GAAGT,WAAW,CAAEU,KAAK,IAAIA,KAAK,CAACC,QAAQ,CAAC;EAClD,MAAMC,QAAQ,GAAGX,WAAW,EAAE;EAE9BF,SAAS,CAAC,MAAI;IAEV,IAAGU,IAAI,CAACI,EAAE,IAAI,CAAC,EAAE;IACjB,IAAG,CAACJ,IAAI,CAACK,OAAO,EAAE;IAElBP,UAAU,CAACE,IAAI,CAAC;IAChBM,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;IAC3CJ,QAAQ,CAACV,YAAY,CAAC;MAACe,GAAG,EAAE,SAAS;MAAEC,KAAK,EAAC;IAAK,CAAC,CAAC,CAAC;EAEzD,CAAC,EAAE,CAACT,IAAI,CAAC,CAAC;EAEV,MAAMU,aAAa,GAAGnB,WAAW,CAAEU,KAAK,IAAGA,KAAK,CAACU,aAAa,CAAC;EAC/D,MAAM,CAACC,WAAW,EAAEC,aAAa,CAAC,GAAGlB,yBAAyB,EAAE;EAEhEL,SAAS,CAAC,MAAI;IACV,IAAGU,IAAI,CAACI,EAAE,IAAI,CAAC,EAAE;IACjB,IAAG,CAACJ,IAAI,CAACc,WAAW,EAAE;IACtBR,OAAO,CAACC,GAAG,CAACG,aAAa,CAAC;IAC1B,IAAG,CAACA,aAAa,CAACL,OAAO,EAAC;IAE1B,IAAIU,OAAO,GAAG,EAAE;IAChBL,aAAa,CAACM,IAAI,CAACC,GAAG,CAAEC,QAAQ,IAChC;MACIH,OAAO,CAACI,IAAI,CAAC;QAACf,EAAE,EAAEc,QAAQ,CAACd,EAAE;QAAEgB,QAAQ,EAAEF,QAAQ,CAACG,YAAY,IAAI;MAAC,CAAC,CAAC;IACzE,CAAC,CAAC;IACF,MAAMC,UAAU,GAAG;MAACC,MAAM,EAAEvB,IAAI,CAACI,EAAE;MAAEW,OAAO,EAAEA;IAAO,CAAC;IACtDH,WAAW,CAACU,UAAU,CAAC;IACvBhB,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;IACjDJ,QAAQ,CAACP,kBAAkB,CAAC,KAAK,CAAC,CAAC;EACvC,CAAC,EAAE,CAACc,aAAa,CAAC,CAAC;AAEvB;AAAC,GArCQb,aAAa;EAAA,QAEsBH,qBAAqB,EAChDH,WAAW,EACPC,WAAW,EAaND,WAAW,EACII,yBAAyB;AAAA;AAqBlE,eAAeE,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}