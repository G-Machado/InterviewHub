{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { changeUser } from \"../store\";\nimport { useFetchQuestionsQuery, useFetchSubmissionQuery, useFetchUserQuery, setupSubmission, loadQuestionsData } from \"../store\";\nimport useSetUserField from \"./useSetUserField\";\nfunction useLoadUser(loginInput) {\n  _s();\n  const [userLogged, setUserLogged] = useState(false);\n\n  // Dispatch loaded user data\n  useEffect(() => {\n    if (!fetchUser.data || fetchUser.isLoading || fetchUser.error || loginInput == '') return;\n    if (fetchUser.data.length <= 0) {\n      setLoginError(true);\n      return;\n    }\n    dispatch(changeUser(fetchUser.data[0]));\n    console.log(fetchUser.data[0]);\n    setUserLogged(true);\n    return;\n  });\n\n  // const user = useSelector(state=>state.userData);\n  // const dispatch = useDispatch();\n  // const fetchUser = useFetchUserQuery(loginInput);\n  // const fetchSubmission = useFetchSubmissionQuery(user);\n  // const fetchQuestions = useFetchQuestionsQuery(user);\n\n  // const [loginError, setLoginError] = useState(false);\n\n  // const setUserField = useSetUserField();\n\n  // // Dispatch loaded submission\n  // useEffect(()=>{\n  //     if(!fetchSubmission.data) return;\n  //     if(!userLogged) return;\n\n  //     // When user is created, so is the submission\n  //     // so we don't need to check for anything\n  //     dispatch(setupSubmission(fetchSubmission.data[0]));\n  //     console.log('loaded submission to slice');\n  //     // console.log(fetchSubmission);\n\n  // }, [fetchSubmission]);\n\n  // // Filter and dispatch loaded user questions\n  // useEffect(() => {\n  //     if(!fetchQuestions.data)return;\n\n  //     let filteredQuestions = [];\n  //     fetchQuestions.data.map((question) =>\n  //     {\n  //         user.questionsId.map((id) => {\n  //             if(id == question.id) \n  //             {\n  //                 filteredQuestions.push(question);\n  //             }\n  //         });\n  //     })\n\n  //     dispatch(loadQuestionsData(filteredQuestions));\n  //     // console.log('loaded filtered questions to slice');\n\n  //     if(!user.startedExam)\n  //     {\n  //         const newDate = new Date();\n  //         const startTime = `${newDate.getDate()}/${newDate.getMonth()+1}/${newDate.getFullYear()}-${newDate.getHours()}:${newDate.getMinutes()}:${newDate.getSeconds()}`;\n\n  //         setUserField(\"startedExam\", true);\n  //         setUserField(\"examStartTime\", startTime);\n  //     }\n\n  //     return;\n  // }, [user, fetchQuestions]);    \n\n  return [fetchUser.isLoading, loginError];\n}\n_s(useLoadUser, \"BWf/Fb98UYdlnpUGOBqyT7D/LdA=\");\nexport default useLoadUser;","map":{"version":3,"names":["useDispatch","useSelector","useEffect","useState","changeUser","useFetchQuestionsQuery","useFetchSubmissionQuery","useFetchUserQuery","setupSubmission","loadQuestionsData","useSetUserField","useLoadUser","loginInput","userLogged","setUserLogged","fetchUser","data","isLoading","error","length","setLoginError","dispatch","console","log","loginError"],"sources":["/Users/machadogomes/Documents/InterviewHub/question_hub/src/Hooks/useLoadUser.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { changeUser } from \"../store\";\nimport { \n    useFetchQuestionsQuery, \n    useFetchSubmissionQuery,\n    useFetchUserQuery,\n    setupSubmission,\n    loadQuestionsData\n} from \"../store\";\nimport useSetUserField from \"./useSetUserField\";\n\nfunction useLoadUser(loginInput)\n{\n    const [userLogged, setUserLogged] = useState(false);\n\n    // Dispatch loaded user data\n    useEffect(() => {\n        if(!fetchUser.data ||\n        fetchUser.isLoading || \n        fetchUser.error || \n        loginInput == '') return;\n\n        if(fetchUser.data.length <= 0){\n            setLoginError(true);\n            return;\n        }\n            \n        dispatch(changeUser(fetchUser.data[0]));\n        console.log(fetchUser.data[0]);\n        setUserLogged(true);\n        \n        return;\n    });\n    \n    // const user = useSelector(state=>state.userData);\n    // const dispatch = useDispatch();\n    // const fetchUser = useFetchUserQuery(loginInput);\n    // const fetchSubmission = useFetchSubmissionQuery(user);\n    // const fetchQuestions = useFetchQuestionsQuery(user);\n\n    // const [loginError, setLoginError] = useState(false);\n\n    // const setUserField = useSetUserField();\n\n    // // Dispatch loaded submission\n    // useEffect(()=>{\n    //     if(!fetchSubmission.data) return;\n    //     if(!userLogged) return;\n        \n    //     // When user is created, so is the submission\n    //     // so we don't need to check for anything\n    //     dispatch(setupSubmission(fetchSubmission.data[0]));\n    //     console.log('loaded submission to slice');\n    //     // console.log(fetchSubmission);\n\n    // }, [fetchSubmission]);\n\n    // // Filter and dispatch loaded user questions\n    // useEffect(() => {\n    //     if(!fetchQuestions.data)return;\n        \n    //     let filteredQuestions = [];\n    //     fetchQuestions.data.map((question) =>\n    //     {\n    //         user.questionsId.map((id) => {\n    //             if(id == question.id) \n    //             {\n    //                 filteredQuestions.push(question);\n    //             }\n    //         });\n    //     })\n\n    //     dispatch(loadQuestionsData(filteredQuestions));\n    //     // console.log('loaded filtered questions to slice');\n        \n    //     if(!user.startedExam)\n    //     {\n    //         const newDate = new Date();\n    //         const startTime = `${newDate.getDate()}/${newDate.getMonth()+1}/${newDate.getFullYear()}-${newDate.getHours()}:${newDate.getMinutes()}:${newDate.getSeconds()}`;\n\n    //         setUserField(\"startedExam\", true);\n    //         setUserField(\"examStartTime\", startTime);\n    //     }\n\n    //     return;\n    // }, [user, fetchQuestions]);    \n\n    \n\n    return [fetchUser.isLoading, loginError];\n}\n\nexport default useLoadUser;"],"mappings":";AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,UAAU,QAAQ,UAAU;AACrC,SACIC,sBAAsB,EACtBC,uBAAuB,EACvBC,iBAAiB,EACjBC,eAAe,EACfC,iBAAiB,QACd,UAAU;AACjB,OAAOC,eAAe,MAAM,mBAAmB;AAE/C,SAASC,WAAW,CAACC,UAAU,EAC/B;EAAA;EACI,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACAD,SAAS,CAAC,MAAM;IACZ,IAAG,CAACa,SAAS,CAACC,IAAI,IAClBD,SAAS,CAACE,SAAS,IACnBF,SAAS,CAACG,KAAK,IACfN,UAAU,IAAI,EAAE,EAAE;IAElB,IAAGG,SAAS,CAACC,IAAI,CAACG,MAAM,IAAI,CAAC,EAAC;MAC1BC,aAAa,CAAC,IAAI,CAAC;MACnB;IACJ;IAEAC,QAAQ,CAACjB,UAAU,CAACW,SAAS,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IACvCM,OAAO,CAACC,GAAG,CAACR,SAAS,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC9BF,aAAa,CAAC,IAAI,CAAC;IAEnB;EACJ,CAAC,CAAC;;EAEF;EACA;EACA;EACA;EACA;;EAEA;;EAEA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAIA,OAAO,CAACC,SAAS,CAACE,SAAS,EAAEO,UAAU,CAAC;AAC5C;AAAC,GA/EQb,WAAW;AAiFpB,eAAeA,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}